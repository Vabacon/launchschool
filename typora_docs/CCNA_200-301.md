# OSI MODEL & TCP/IP



**Networking Models** categorize and provide a structure for networking protocols and standards.

**Network Protocols** are sets of rules defining how networking devices and software should work. These protocols are refered to as **Logical** rules, and not physical.



**The OSI Model**

OSI stands for "Open Systems Interconnection", where open means open model. Created by ISO "International standard for Organization."

OSI functions in 7 layers.

7. **Application layer** - Closest to the end client, Interacts with software applications such as web browsers. HTTP and HTTPS are layer 7 protocols. i.e https://cisco.com/

   The Application layer **identifies** and **Synchronizes** communications between end hosts, and uses Encapsulation.

   **Encapsulation** is the process in which data from each layer is added onto a broken down piece of data known as a **Segment** which is added upon as data passes down the OSI stack. The process of **De-encapsulation** is the removal of the appended additional data as it moves back up the stack to the Application layer on the other system.

   **Adjacent-Layer Interaction** is the process of both encapsulation and de-encapsulation.

   **Same-Layer Interaction** is the process of two different systems identifying and synchronizing within the same layer.

6. **Presentation layer** - Translates application formatted data to a format that is ready to be sent over the network.

- Translates between application formats and network formats.
- Encrypts data being sent, decrypts data being received.

5. **Session layer** - Controls dialogue (sessions) between the communicating hosts. Establishes, manages, and terminates between  the local application and remote application (Server side).

The upper 3 layers (5, 6, 7) are usually worked on by application developers, and are not usually worked on by network engineers.

4. **Transport layer** - Segments and reassembles data for communication between end host. 
   - Breaks up large pieces of data into **Segments** to be easily sent over the network.
   - Less likely to cause transmission errors if issue arrises.
   - Provides **Host-to-Host** or **End-to-End** communication.
   - During encapsulation, The segmented data is processed and gets an "L4 header".
     - |Data|Layer 4 header ----------- "Segment"


3. **Network layer** - Provides connectivity between end hosts on different networks outside the LAN. 

- Provides **logical Addressing** (IP addresses), path selection between source and destination.
- Routers operate at layer 3 because they are layer 3 devices.

As data passes through the the Network layer, a layer 3 header is added.

 - |Data|Layer 4 header|Layer 3 header ------------ "Packet"

2. **Data Link layer** - Provides node-to-node connectivity and data transfer. Defines how data is formatted for transmission over physical medium, Such as copper cable electrical signals or wireless radio signals.

- Switches operate at Layer 2, and use L2 destination data to determine where to send data.
- |L2 trailer| Data | L4 header | L3 header | L2 header --------- "Frame"

1. **Physical layer** - Defines physical characteristics of the medium used to transfer data between devices.

- Determines voltage levels, maximum transmission distances, rates, physical connectors, cable specifications, etc.
- Bits are converted into electrical signals on wired connections, and into radio signals, for wireless connections.
- All the information on physical layers in the **Interfaces and Cables** chapter is related to the physical layer.



**OSI PDUs**

PDU stands for "Protocol Data Units". Is the term given to data as it proceeds through the OSI stack.

- L4 PDU is called a "Segment"
- L3 PDU is called a "Packet"
- L2 PDU is called a "Frame"
- L1 PDU is called a "Bit"

An acronym for these PDUs is "All People Seem To Need Data Processing", for Application, Presentation, Session, Transport, Network, Data Link, Physical.



**TCP/IP**

**Transmission Control Protocol / Internet Protocol** Is a conceptual model and set of communications protocols used in the Internet and other networks, that are in use today.

- Developed by the U.S.D.O.D through DARPA, the model contains a similar structure to the OSI model but with **fewer** layers.
- Although TCP/IP is used today in modern networks, OSI still influences how network engineers think and talk about networks.

There are only 4 layers to the TCP/IP.

4. Application = upper 3 layers of the OSI model.

3. Transport = layer 4 "Transport"

2. Internet = layer 3 "Network"

1. Link = Layer 2 and 1 "Data Link" and "Physical"

When referring to a layer, such as "in layer 2", be aware that people may consider layer 2 within the OSI model and not the TCP/IP. So when talking or mentioning a layer, speak in terms of OSI, and specify when talking about TCP/IP.

A network data flow shows encapsulation with host A,

- forwarded to a router over a UTP Ethernet cable, de-encapsulated so that the router can see the layer 3 address, since routers are layer 3 devices. encapsulates the data again, and sent to another router over long distance fiber cabling.
- The next router de-encapsulates the data to see the layer 3 address, encapsulated again, and sent to the router at host B.
- Host B de-encapsulates the data, removed headers at layer 3 and 4, and is finally available to the end client. 



# INTRODUCTION TO THE CISCO IOS CLI



**CLI** is a command line interface used to configure devices such as routers and switches. 

To use the CLI to configure a device will require the engineer to connect to it using the "console" ports, which vary from device to device. Such ports can be a USB Mini - B or a RJ45 connector. The RJ45 connectors, on such devices as the Cisco Catalyst 2960-s require a DV9 serial connector to interface with the device. Most laptops and PCs today do not have these connectors any more and will need a DV9 to USB adapter.

**Rollover Cable** is the term used for DV9 connector cables that act similar to a UTP cable. The pinning of this cable is:

- pin 1 -- pin 8
- pin 2 -- pin 7
- pin 3 -- pin 6
- pin 4 -- pin 5
- pin 5 -- pin 4
- pin 6 -- pin 3
- pin 7 -- pin 2
- pin 8 -- pin 1

Hence the term, "rollover" cable.



**Interfacing with the CLI**

Here is a list of default Cisco device settings within a terminal emulator "PuTTy" at [putty.org][www.putty.org]. <u>These are default Cisco settings and are good to remember for the test.</u>

| Serial line to connect to | COM1 |
| ------------------------- | ---- |
| Speed (baud)              | 9600 |
| Data bits                 | 8    |
| Stop bits                 | 1    |
| Parity                    | None |
| Flow control              | None |

**baud** rate ("bod") / data bits and stop bits is outside the scope of CCNA. Means for each 8 bits of data, 1 bit is sent as a stop to make the end of the 8 bits. **Parity** is used to detect errors. **Flow Control** controls the flow of data from transmitter to reciever. These do not need to be known for the CCNA test.

**Cisco IOS CLI**

When first entering the CLI, by default the **user EXEC** mode will be enabled. The user EXEC mode is denoted using the `>` greater than sign. i.e. `Router>`, similar to linux terminals. "Router" is the default name for the host.

- User EXEC mode cannot change any configuration files, but can view some things. Also called **user mode**.

In the CLI, by typing in the `enable` command, the CLI enters **privileged EXEC** mode, which is denoted by a `#` pound sign.

`Router>enable`

`Router#`

- This mode provides complete access to view the devices configuration, restart the device, etc.

- However, this mode still cannot change the configuration files, but can change the TIME and save the configuration file.

While in the CLI, the `?` can be used as a command to show the available commands.

- `Router#?` => shows available commands within the privileged EXEC mode.

**HINT**: Like in the Linux terminal emulators, the TAB key can be used to auto fill commands that are available, and sometimes these commands can be entered without typing in the entire command. Operates with similar rules to the Linux terminal.

- `Router#e?` : shows all commands that start with the character `e`.

**Global Configuration Mode**

To begin configuring devices, use the `configure terminal` command to enter global configuration mode.

```ruby
Router>enable
Router#configure terminal
Enter configuration commands, one per line. End with CNTL/Z.
Router(config)#    
```

After entering configuration mode, `config` is inserted after the host name.

- The whole word does not need to be typed. Simply using `conf t` can be used as short hand for `configure terminal`.



**Enable Password**

```bash
Router(config)#enable password ?
	7		Specifies a HIDDEN password will follow.
	LINE	The UNENCRYPED (cleartext) 'enable' password
	level	Set exec level password
Router(config)#enable password CCNA ?
	<cr>
Router(config)#enable password CCNA
Router(config)#
```

In the above, the `password ?` command with a space following the `?` command will output available commands that can be appended to the `enable password` command. It shows `7`, `LINE`, and `level`.

In the next input, the password is set using the `LINE` command which doesn't need to be entered, simply add the password. Which was set to `CCNA`. Afterwards, a `?` following a space was entered to show any available commands. The `<cr>` indicates that there are no more commands that can be added at the time.

Passwords are case sensitive. When asked for a password, the device does not display the input for security reasons. Upon 3 failed attempts, the CLI will output `% Bad secrets` which means incorrect password.



**running-config vs. startup-config**

There are two separate configuration files kept on the device at once.

**running-config** = the current, active configuration file on the decice. As commands are entered in the CLI, the acitve configuration files is edited.

**startup-config** = the configuration file that will be loaded upon restart of the device.

The `show running-config` command will display the running configuration file. This may be a lot of data. On a new device or not configured device there may not be a startup configuration file, and a default startup configuration file will be loaded.

To create a startup configuration file:

```bash
Router#write
Building configuration...
[OK]
Router#write memory
Building configuration...
[OK]
Router#copy running-config startup-config
Destination filename [startup-config]?
Building configuration...
[OK]
Router#
```

Both the `write` and the `write memory` commands do the same thing. Using the `copy` command acts the same way in Linux terminals to copy, rename, and create new replicate files.

Within the `show running-config` command, there will be visible the `password` command from earlier, this must be encrypted to increase security. Using the `Router#service password-encryption` command, any passwords that were previously visible, are now encrypted.

```bash
Router#show running-config
Building configuration...
Current configuration: 719 bytes
!
!
enable password 7 08026F6028
!
```

This shows how the `service password-encryption` command worked by changing the passwords display output. The number `7` in front of the password, indicates which Cisco proprietary encryption algorithm is being used. However, this can be easily de-encrypted.

**Enable Secret**

A stronger encryption, compared to the `service password-encryption`, is the `enable secret Cisco`, which uses MD5 encryption.

```bash
Router(config)#enable secret Cisco
Router(config)#do sh run
Building configuration...
!
hostname Router
!
enable secret 5 $1$mERr$YlckLMcTYWwkF1Ccndtll.
enable password 7 08026F6028
```

`do sh run`: The `do` allows the execution of privliged EXEC commands. The `sh` and `run` are short hand for `show running-config`.

This shows how both commands are still present, and how `enable secret` should be used in place of the `service password-encrypt`. The `5` in front of the command indicates the MD5 encryption level. Cisco is the password. If both encryption commands are present, only the `enable secret` command will be valid. Also, the `enable service password` command has no effect on the `enable secret` command.

**Summary of service password-encryption**

If `service password-encryption` is enabled:

- Current passwords **will** be encrypted.
- Future passwords **will** be encrypted.
- The enable secret **will not** be efected.

If disabling `service password-encryption`:

- Current passwords **will not** be decrypted.

- Future passwords **will not** be encrypted.

- The `enable secret` will not be effected.

  

**Canceling Commands**

Using the `no` command in front of a command will cancel, or delete, the command.

```bash
Router(config)#no service password-encryption
```

This will remove the `service password-encryption` command and future passwords will no longer by encrypted. Passwords that have been already will remain encrypted.



**Review of Modes and Commands**

`Router>`										= user EXEC mode

`Router#`										= privileged EXEC mode

`Router(config)#`						= global configuration mode

-------------------------------------------

`Router>enable`

- used to enter privileged EXEC mode

`Router#configure terminal`

- used to enter global configuration mode

`Router#enable password`

- configure a password to protect privileged EXEC mode

`Router(config)#service password-encryption`

- encrypts the enable password (and other passwords)

`Router(config)#enable secret <password>`

- configures a more secure, always encrypted enable password

`Router(config)#run <privileged-exec-level-command`>

- â€‹	executes privileged EXEC command from global config mode.

`Router(config)no <command>`

- removes the command

`Router(config)#show running-config`

- displays the current, active configuration file

`Router(config)#show startup-config`

- displays the saved configuration file which will be loaded if the device is restarted

`Router(config)#write`

`Router(config)#write memory`

`Router(config)#copy running-config startup-config`

- all used to save the current running configuration and make it the startup configuration.

# Ethernet LAN Switching



Focusing on how Ethernet frames, refer to layer 2 Data Link, are sent over the Internet. The frame consists of an **Ethernet Header**, the data known as a **Packet**, and an **Ethernet Trailer**.

Header:

| Preamble (7 bytes) | SFD (Start Frame Delimiter) (1 byte) | Destination (6 bytes) | Source (6 bytes) | Type (or Length) (2 bytes) |
| ------------------ | ------------------------------------ | --------------------- | ---------------- | -------------------------- |

The trailer is appended to the front of the data "Packet" which gives 5 types of information.

The minimum size for an Ethernet payload frame is 46 bytes, including the packet (Header + Payload [Packet] + Trailer), but not including the Preamble and SFD. If less than 46 bytes, then padding bytes are added. A padding byte consists of nothing but 0s. Each hexadecimal digit is 4 bits.

The **Preamble**: 

- Length: 7 bytes (56 bits)
- Alternating series of 1s and 0s (10101010 x 7)
- Allows devices to synchronize data clocks, which will get them ready for the rest of the data.

The **SFD** (Start Frame Delimiter): 

- Length: 1 byte (8 bits) consisting of 10101011 (where the last bit is a 1).
- Marks the end of the preamble, and the beginning of the rest of the frame.

**NOTE**: The Preamble and the SFD are not usually considered part of the Ethernet header.

**Destination** and **Source**:

- Indicate the devices sending and receiving the frame. Contains the destination and source MAC (Media Access Control) address.
- Length: 6 bytes (48 bits) address of the physical device. 6 bytes for each the Destination and Source.
- The MAC address is unique to the device, and is assigned when it is made.

**Type** or **Length**:

- Length: 2 byte (16 bit) field.
- A value of 1500 or less in the field indicates the **Length** of the encapsulated packet in bytes.
- A value of 1536 or greater in this field indicates the **Type** of the encapsulated packet. Usually IPv4 or IPv6, and the length is determined via other methods.

IPv4 = 0x0800 (hexadecimal), which is 2048 in decimal.

IPv6 = 0x86DD (hexadecimal), which is 34525 in decimal. Used to identify that this is a IPv6 packet.



Trailer:

| Ethernet Header | Data | Ethernet Trailer (FCS) |
| --------------- | ---- | ---------------------- |



**FCS** (Frame Check Sequence):

- 4 bytes in length (32 bits)
- Detects corrupted data by running a **CRC** (Cyclic Redundancy Check) algorithm over the received data.



**MAC Addresses**

a MAC address is a 6 byte (48 bits) physical address assigned to the device when it is created. Also known as "Burned-in Address", the address is globally unique, and written as 12 **hexadecimal** characters.

- The **first** three bytes (24 bits) of the MAC address is the OUI (Organizationally Unique Identifier), which is assigned to the company manufacturing the device.
- The **last** three bytes are unique to the device itself.



**Hexadecimal**

Uses 16 possible digits:

- 0, 1, 2, 3, 4, 5, 6, 7 ,8, 9, A, B, C, D, E, F

Where the letters represent numbers.

- A = 10, B = 11, C = 12, D = 13, E = 14, F = 15

| DEC. | HEX. | DEC. | HEX. | DEC. | HEX. | DEC. | HEX. |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 0    | 8    | 8    | 16   | 10   | 24   | 18   |
| 1    | 1    | 9    | 9    | 17   | 11   | 25   | 19   |
| 2    | 2    | 10   | A    | 18   | 12   | 26   | 1A   |
| 3    | 3    | 11   | B    | 19   | 13   | 27   | 1B   |
| 4    | 4    | 12   | C    | 20   | 14   | 28   | 1C   |
| 5    | 5    | 13   | D    | 21   | 15   | 29   | 1D   |
| 6    | 6    | 14   | E    | 22   | 16   | 30   | 1E   |
| 7    | 7    | 15   | F    | 23   | 17   | 31   | 1F   |

This chart shows the decimals and their hexadecimal equivilant.

In the DEC. = 16, its equivalent is 10, after 16, the 10s place hold the value of 16, and the ones place holds the next value. This is due to the limited values of only 16 possible digits.



**MAC Address table**

A switch can look, identify, and learn MAC addresses of devices sending frames to and from destinations. This is known as **Dynamically Learned** MAC address, or just **Dynamic** MAC address, since the switch wasn't manually configured to know that device. The switch will keep a MAC address table from each device, and store it with it's associated interface.

- When sending a frame to another device by using a source and destination MAC address, this is called a **Unicast Frame**. A frame destined for a single target.
- **Unknown Unicast Frame** is when a switch does not known where to send the frame since it has not yet been associated with the device yet, it will proceed to **FLOOD** the frame.
- **Flood** is when a switch does not know where to send a particular frame, and decides to send it out on all connected interfaces except the receiving interface. Devices where flooded frames are sent, but not intended for, will drop the packet. Devices in which the from was intended will process the frame.
- **Known Unicast Frame** is a frame for which the destination MAC address is already in the switch's MAC address table. Since it already knows how to reach the destination, there is no need to flood the frame. These frames are simply forwarded to the destination, and the switch does not flood.

| MAC Address       | Interface |
| ----------------- | --------- |
| AA.AA.AA.00.00.01 | F0/1      |
| AA.AA.AA.00.00.02 | F0/2      |
| AA.AA.AA.00.00.03 | F0/3      |

This is an example of a MAC address table kept by switches, each source address is stored with is corresponding interface (port). A switch uses the Source MAC address field, or the Ethernet header, to populate its MAC address table. It associates the source MAC address with the interface on which the frame was received. Dynamic addresses are stored for five (5) minutes before it is dropped in a process known as **Aging**, or until the device sends more data through the switch. Again, this data is learned dynamically, and is not configured within the switch. F0/1 is Fast Ethernet at 100 Mbps (mega bits per second) in port 1.

**COMMANDS TO KNOW**

To view the MAC address table on Cisco's IOS, use command `mac address-table`. To clear a tables dynamic addresses, use `clear mac address-table dynamic`. This will remove all dynamic addresses. To clear a specific dynamic address, use `clear mad address-table dynamic address (MAC address)`. To clear at a specific interface, use `clear mac address-table dynamic interface (interface-id)`.

**COMMANDS TO KNOW**



The `mac address-table` command will output the VLAN, MAC Address, Type, and Ports for each devices associated with the switch.





**ARP** (Address resolution Protocol)

ARP is used to discover the Layer 2 address (MAC address) of a known Layer 3 address (IP address). Simply, it is used to learn the MAC address of a device with a known IP address.

ARP consist of two messages:

1. ARP Request

   - Used to learn the Layer 2 address of a host. Because the Layer 2 address is not yet known, the message has to be broadcast to all hosts on the local network.

   - The request is **broadcast**, meaning it is sent to all hosts on the network.
   - A broadcast frames have a destination MAC address of FF.FF.FF.FF.FF.FF and are sent to all hosts on the local network. This is used when a device wants to send Ethernet frames to specific address it does not know.

2. APR Reply
   - The ARP Reply is a Unicast message sent to the host that sent the ARP request.

An ARP table is used to store IP addresses with their associated MAC addresses. The information contains the IP address of a sending device, its MAC address, and they type of data (static or dynamic) depending on which way the switch learned the device.

Type static = default entry.

Type dynamic = learned via ARP.

**NOTE**: the ARP table can be viewed in the Linux terminal via the `arp -e` command, which will show all data in the 'Linux style'. This command will usually display the Internet Address (IP), Physical Address (MAC), and the Type (static/dynamic).

**Ping** 

A ping is a network utility that is used to test reachability, and measures the round-trip time between the source to destination and back to source.

The ping uses two messages:

1. ICMP Echo Request: A unicast message used to test the reachability of another specific host.
2. ICMP Echo Reply: A unicast reply to the request.

ICMP (Internet Control Message Protocol)

Using the ping command in the Linux terminal is `ping (ip-address)`.

Cisco ping default is to send **5** ICMP Echos at **100 bytes** per echo, and should receive 5, 100 byte, echos back. A period (`.`) indicates a failed ping, and an exclamation point (`!`) indicates a successful ping. In Cisco IOS a min/avg/max time in milliseconds will be displayed.

In Cisco IOS, the command to view the ARP table is `host_name#show arp` from privileged EXEC mode.



# IPv4 Addressing

IP addresses are 32 bits (4 bytes) in length, split up into 4 **Octets** consisting of 8 bits, and then written in **Dotted Decimal** format to make it easier for us to read and understand.

|   192.   |   168.   |    1.    |   254    |
| :------: | :------: | :------: | :------: |
|  8 bits  |  8 bits  |  8 bits  |  8 bits  |
| 11000000 | 10101000 | 00000001 | 11111110 |

From top to bottom: Dotted Decimal; Length in bits; Binary equivalent of the number.

- IP in dotted decimal: 192.168.1.254
- IP in binary: 11000000101010000000000111111110
- IP split into binary octets: 11000000 10101000 00000001 11111110

An IP address using 192.168.1.254/24 - The first 24 bits are used to determine the local network portion of the address, and the remaining 8 bits represent the end host.

- 192.168.1 - represents the network.
- .254/24 - represents the end host. This is the specific address to the device. 
- Similarly, 154.78.111.32/16 - is shown that the first 16 bits is the network address.

**Decimal and Hexadecimal**

Decimal (base 10) are multiples of 10, and hexadecimal (base 16) operate as multiples of 16.

| Decimal     | 3      | 2      | 9      | 4    |
| ----------- | ------ | ------ | ------ | ---- |
| (base 10)   | 3*1000 | 2*100  | 9*10   | 4*1  |
| Hexadecimal | C = 12 | D = 13 | E = 14 |      |
| (base 16)   | C*256  | D*16   | E*1    |      |

This shows representative decimal and hexadecimal to the number 3294. The multiples are shown as the lowest value multiple from the right and the highest shown multiple to the left.



**Binary**

Binary is base 2, meaning that it operates at a multiple of 2. To demonstrate the use of binary to represent the numbers of an IP address (192.160.1.254) and show how to convert from decimal to binary.

| 1     | 1    | 0    | 0    | 0    | 0    | 0    | 0    |
| ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 1*128 | 1*64 | 0*32 | 0*16 | 0*8  | 0*4  | 0*2  | 0*1  |

128 + 64 = 192

| 1     | 0    | 1    | 0    | 1    | 0    | 0    | 0    |
| ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 1*128 | 0*64 | 1*32 | 0*16 | 1*8  | 0*4  | 0*2  | 0*1  |

128 + 32 + 8 = 168, and so on. Common terminology refers to binary sets as **Octets**, referring to their 8 bits.

To convert from decimal to binary, write out the binary multiples (128, 64, 32, 16, 8, 4, 2, 1) and work from left to right subtracting from the decimal digit until you get 0 from. Cannot subtract to negative numbers. Any number that cannot be subtracted, which would create a negative number, gets assigned a 0. Those which subtract from the digit get assigned a 1. 

The range of binary in 8 bits is from 0 to 255.



**IPv4 Address Classes**

| Class | First Octet <br />Leading bits | First Octet <br />Numeric Range | Prefix Length |
| ----- | ------------------------------ | ------------------------------- | ------------- |
| A     | 0xxxxxxx                       | 0 - 127                         | /8            |
| B     | 10xxxxxx                       | 128 - 191                       | /16           |
| C     | 110xxxxx                       | 192 - 223                       | /24           |
| D     | 1110xxxx                       | 224 - 239                       |               |
| E     | 1111xxxx                       | 240 - 255                       |               |

Mostly, class A, B, and C are used. Class D is used for Multicast addresses, and Class E is a reserved address for experimental uses. **Prefix Length** = **Size of network number bit field**.

- Class A: 12.128.251.23/8
  - Subnet Mask: 225.0.0.0
- Class B: 154.111.32/16
  - Subnet Mask: 225.225.0.0
- Class C: 192.168.1.254/24
  - Subnet Mask: 225.225.225.0

In Class A, there are fewer possible network addresses, and many possible end hosts. Class C is the opposite, there can be many more network address, but fewer hosts.

**Look up Netmasks and what they are** 

Network masks are a slightly different way of writintg.......

**Loopback Addresses**

Address range 127.0.0.0 - 127.255.255.255 are used to test the 'network stack' (think OSI, TCP/IP model) on the local device. The device will send and respond to it's own pings/messages, and will display a 0 ms traffic time, since it isn't going anywhere, it will always be 0.



**Maximum Hosts per network**

Maximum hosts per network = (2^n)-2, where n is equal to the number of host bits.

Within the host portion of an address, if it consists of all 0s then it is reserved for the network address (network id). When a host address consists of all 1s (ie. 10.255.255.255/8) then it is reserved for the **broadcast Address**. The Network address and the Broadcast Address are both not assignable to end hosts and are reserved.

Class B network:

- 172.16.0.0/16 ----------- 172.16.255.255/16
  - Host bits available = 16 bits
  - Network bits available = 16 bits
  - (2^16)-2 = 65,534 hosts per network.

Class A netowrk:

- 10.0.0.0/8 ------------- 10.255.255.255/8
  - Hosts bits available = 24 bits
  - Network bits available = 8 bits
  - (2^24) - 2 = 16,777,214 hosts per network.



**First/Last Usable Address**

To find the first and last usable addresses, or simply the address neighboring the reserve addresses.

Class A network address

1. 10.0.0.0/8, where all host bits are 0 and reserved for the network ID/address.
2. 00000000 00000000 00000000 + 1 = 00000000 00000000 00000001
3. 10.0.0.1/8 = first usable address starting from all 0s.

Class C network address

1. 192.168.1.225, where all host bits are 1 and reserved for the broadcast address.
2. 11111111 - 1 = 11111110
3. 192.168.1.254 = first usable address starting from all 1s.

By adding or subtracting 1 bit from the reserve addresses, the first usable address can be found. This is also why when calculating the maximum hosts per network, they subtract 2 from the total to account for reserve addresses.



**Configuring a Cisco router with IP addresses**

Using the command: `show ip interface brief` within privileged EXEC mode to display the IP addresses with their associated interfaces. This command shows six fields.

1. Interface - Shows what interface is being used.
2. IP-Address - Shows IP address.
3. OK? - Checks whether or not the IP is valid. No longer relevant.
4. Method - Checks to see what methods was used to assign the IP address.
5. Status - <u>Layer 1 status</u> of the interface, give information on the operating status of the routers interface. Gives information of the physical aspect of the network. (ie. cables, and connections.)
   - `administratively down`: Interface has been disabled with the `shutdown` command.
   - The **default** status for Cisco router interfaces is `administratively down`.
   - Cisco Switches are **NOT** administratively down by default.
6. Protocol - <u>Layer 2 status</u> of the interface. Gives information of the function of Ethernet between two devices.

`interface gigabitethernet0/0` OR `interface gigabitethernet 0/0` OR `int g0/1`, for example is short hand, and are both acceptable ways of writing the interface. Cisco's IOS will understand and accept both. This command is executed from within the global configuration mode.

- When using the `interface ...` command within Cisco's IOS, the terminal enters **Interface Configuration mode**. This is de noted as: `(config-if)#`.

To configure the IP address, use command: `ip address (address)`. `ip address 10.255.255.254`. To enable the interface, since the default Cisco router settings are administratively down, use the `no shutdown` command to enable it. A message showing that the states for the interfaces was changed to up.

**Subnets**

When configuring IP addresses within the terminal, the subnet needs to be given to tell the terminal which IP class the address is.

- `ip address 192.168.1.54 255.255.255.0` - The first address is the assigning address, the second is the subnet address telling the terminal which class the address is in. This is a class C network address.
- Subnet mask network bits are all set to 1, and host bits are set to 0. This way the devices can separate the network and host addresses. These addresses are reserved and cannot be assigned to hosts.

**Show Commands**

`show interfaces (interface id)` - shows layer 1 and layer 2 information about available interfaces or selected interface.

`show interfaces description` - Displays 4 fields, `Interface`, `Status`, `Protocol`, and `Description`. Description are optional input information that can help users understand its function and purpose.

To modify the description for an interface connection, use commands `interface (interface id)` within global configuration mode. Use `description (description of device interface)`.



# SWITCH INTERFACES



Switch interfaces by default are in an up state,  when using the `show ip interface brief` command, the `Status` and `Protocol` will be in the up - up state, indicating that they are up by default in contrast to a router.

**Router** interfaces have the `shutdown` command applied by default, which means the router will be in the `administratively down` / `down` state by default.

**Switch** interfaces do NOT have the `shutdown` command applied by default, which means the switch will be in the `up` / `up` state if connected to another device OR in the `down`/`down` state if not connected to another device.

`show interface status` : Displays seven fields:

- Port - Displays the port/interface connected.
- Name - Displays the description of the interface. Not sure why it's called name rather than description.
- Status - Displays the status connection of the interface, `connected` / `notconnected`, there are other possible options for this field.
- Vlan - Default vlan is 1. Can be used to separate LANs into smaller LANs.
- Duplex - Displays weather or not a connected device is full or half duplex. By default, the devices are set to `auto` and connected devices will be negotiated with to figure out it's connectivity. `a-full` = auto full duplex.
- Speed - Displays the rate of bits per second of the interface, depends on the rate the device and connection. 
- Type - For RJ45 100 Mbps shows `10/100BaseTX`, if it were a SFP, it would display as well.

To manually configure the speed, enter the interface configuration mode, and use the `speed` command. To manually set the duplex mode, use command `duplex`. Be sure to use the `?` command with these to see the available commands.

To configure multiple interfaces at a time, use `interface range f0/5 - f0/12` its syntax is `interface range (interface to interface)`. This command is executed within the global configuration mode. This will change the terminal header to `Switch_name(config-if-range)#`. Use commands as usual to apply them to the range of interfaces. To select multiple interface ranges, use `interface range f0/5 - f0/6, f0/9 - f0/12`, from a range of 5 to 6, and 9 to 12, but not 7 and 8.

**Full/Half Duplex**

- Half-duplex - The device cannot send and receive data at the same time. IF it is receiving a frame, it must wait before sending a frame.
  - Devices connected to a **Hub** must operate in half duplex.
- Full-duplex - The device CAN send and receive data at the same time. It does not have to wait.
  - Devices attached to a **Switch** can operate in full duplex.



**CSMA/CD**

Before modern networks, there use to be whats called a **Hub** which acted like a switch, but always flooded its interfaces with each frame it receives. If two devices send a frame at the same time, and the hub receives at the same time, then when the hub floods it's interfaces it will result in **Collision**, when two frames are being sent at the same time. When collision occurs, the devices receiving the two frames will not receive any frames. The two frames cancel out.

CSMA/CD (Carrier Sense Multiple Access with Collision Detection): It describes how debices avoid collision in a half duplex situation, and how to react when collisions do occur.

- Before sending frames, devices 'listen' to the collision domain until they detect that other devices are not sending.
- If a collision does occur, the device sends a jamming signal to inform the other devices that a collision happened.
- Each devices will wait a random period of time before sending frames again. And the process repeats.



**Speed/Duplex Autonegotiation**

Applies to both routers and switches.

- Interfaces that can run at different speeds (10/100 or 10/100/1000) have default settings of **speed auto** and **duplex auto**.
- Interfaces 'advertise' their capabilities to the neighboring devices, and they negotiate the best **speed** and **duplex** settings they are both capable of.

For example, if a PC with an Ethernet connection (10 Mbps) is connected to a switch, the switch will detect and set the interfaces speed to 10 Mbps. And so on for the faster devices. The switch/router will also detect that this is is a full duplex device, and will be automatically set to full-duplex.

IF Autonegotiation is disabled on the device connected to the switched it will:

1. Try to sense the speed that the other device is operating at. If it fails, it will use the slowest supported speed. (10 Mbps on a 10/100/1000 interface.)
2. If the speed is 10 Mbps or 100 Mbps, the switch will use half duplex. If the speed is 1000 Mbps, use full duplex.
   - If using full duplex and half duplex on the same interface to end host, then collisions WILL occur. Therefore, the configured devices should always be set to Autonegotiation.'



**Interface Errors**

**Runts** - Frames that are smaller than the minimum frame size (64 bytes)

**Giants** - Frames that are larger than the maximum frame size (1518 bytes)

**CRC** - Frames that failed the CRC check (in the Ethernet FCS trailer)

**Frame** - Frames that have an incorrect format due to an error.

**Input errors** Total of various counters, such as the above four.

**Output errors** - Frames the switch tried to send, but failed due to an error.



:) NEXT IS DAY 10







